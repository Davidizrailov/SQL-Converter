name,parameters,return_values,tables_accessed/0,tables_accessed/1,tables_accessed/2,standard_output/0,standard_output/1,errors/0,errors/1,errors/2,errors/3,errors/4,tables_accessed/3,tables_accessed/4,tables_accessed/5,tables_accessed/6
process_payroll,p_date IN DATE,None,work_hours,staff,payroll,"dbms_output.put_line(to_char(v_start_date, 'yyyy-Mon-dd, HH24:MI:SS'));","dbms_output.put_line(to_char(v_end_date, 'yyyy-Mon-dd, HH24:MI:SS'));","jta_error.throw(-20201, 'There was no work hours recorded for this week: ' || to_char(v_start_date, 'yyyy-Mon-dd, HH24:MI:SS') || ' to ' || to_char(v_end_date, 'yyyy-Mon-dd, HH24:MI:SS'));",jta_error.invalid_input (handled by showing in console and rolling back),OTHERS (logged into error table and rolled back),,,,,,
update_inventory,"p_product_id IN cost_sales_tracker.product_id%TYPE, p_quantity IN NUMBER, p_new_cost IN cost_sales_tracker.cost_per_unit%TYPE",None,products,cost_sales_tracker,,None,,"jta_error.throw(-20201, 'cannot update a zero amount to inventory');","jta_error.throw(-20201, 'non existing product being updated to inventory');","jta_error.throw(-20201, 'cannot update inventory with non positive cost per unit');","jta_error.throw(-20201, 'cannot remove more items than already exists in inventory');",OTHERS (logged into error table and rolled back),,,,
restock_urgent,p_staff_id IN staff.staff_id%TYPE,None,inventory_by_location,products,suppliers_per_products,None,,OTHERS (logged into error table and rolled back),,,,,purchase_orders,purchase_order_lines,,
get_last_cashier_payout,p_staff_id IN staff.staff_id%TYPE,cashier_drawer_assignments.cash_amount_end%TYPE,cashier_drawer_assignments,,,None,,no_data_found (returns 0),"OTHERS (logged into error table, returns NULL)",,,,,,,
get_money_inflow,"p_location_id IN locations.location_id%TYPE, p_start_date IN DATE, p_end_date IN DATE, p_type IN VARCHAR2 := 'cash'",cashier_drawer_assignments.cash_amount_start%TYPE,locations,cashier_drawer_assignments,cashier_stations,None,,no_data_found (throws custom error: 'location does not exist'),"jta_error.throw(-20201, 'invalid type, valid types: cash, non-cash');",jta_error.invalid_input (shown in console and returns NULL),OTHERS (logged into error table and returns NULL),,,,,
update_taxes,None,None,pending_tax_changes,tax_rates,tax_rate_history,None,,"jta_error.throw(-20201, 'attempt to update tax to same rate');",jta_error.invalid_input (logged error and continues to next row),no_data_found (ignored),OTHERS (logged into error table and rolled back),,,,,
get_price_changes,"p_product_id IN products.product_id%TYPE, p_start_date IN DATE, p_end_date IN DATE",price_changes_table,price_history,products,,None,,no_data_found (handled internally by setting old_price to 0),"OTHERS (logged into error table, returns empty table)",,,,,,,
get_profits_for,"p_start_date IN DATE, p_end_date IN DATE, p_goods_sold OUT NOCOPY NUMBER, p_gross_gain OUT NOCOPY NUMBER, p_costs OUT NOCOPY NUMBER, p_net_gain OUT NOCOPY NUMBER",None,billed_items,customer_bills,cost_sales_tracker,None,,OTHERS (logged into error table; sets output parameters to NULL),,,,,,,,
get_recommended_price_for,"p_product_id IN products.product_id%TYPE, p_avg_cost OUT NOCOPY products.price_rate%TYPE, p_old_price OUT NOCOPY products.price_rate%TYPE, p_new_price OUT NOCOPY products.price_rate%TYPE",None,products,tax_rates,cost_sales_tracker,None,,no_data_found (throws custom error: 'product does not exist or has not been added to inventory'),OTHERS (logged into error table; sets output parameters to NULL),,,,,,,
evaluate_po_order_line,"p_line_id IN purchase_order_lines.po_line_id%TYPE, p_not_enough_to_restock OUT NOCOPY BOOLEAN, p_not_at_min_level OUT NOCOPY BOOLEAN",None,purchase_order_lines,purchase_orders,inventory_by_location,None,,no_data_found (logs a custom error: 'purchase not exist or inventory has never been added for this item'; sets output parameters to TRUE),OTHERS (logged into error table; sets output parameters to TRUE),,,,,,,
lookup_barcode,"p_barcode IN VARCHAR2, p_product_id OUT NOCOPY products.product_id%TYPE, p_product_name OUT NOCOPY products.product_name%TYPE, p_price_rate OUT NOCOPY products.price_rate%TYPE, p_tax_code OUT NOCOPY tax_rates.tax_code%TYPE, p_tax_rate OUT NOCOPY tax_rates.tax_rate%TYPE",None,products,tax_rates,,None,,no_data_found (logs a custom error: 'price look up for item that does not exist'; sets output parameters to NULL),OTHERS (logged into error table; sets output parameters to NULL),,,,,,,
update_from_bill,p_bill_id IN customer_bills.bill_id%TYPE,None,billed_items,customer_bills,products,None,,OTHERS (logged into error table and rolled back),,,,,cashier_drawer_assignments,cashier_stations,inventory_by_location,sold_products
update_sales,None,None,sold_products,customer_bills,billed_items,"dbms_output.put_line('*alert application layer*, there was no data to update');",,no_data_found (prints an alert to the application layer),OTHERS (logged into error table and rolled back),,,,cost_sales_tracker,,,
add_item_to_bill,"p_bill_id IN customer_bills.bill_id%TYPE, p_barcode IN products.barcode%TYPE",None,customer_bills,products,tax_rates,None,,no_data_found (throws custom error: 'failed to update bill items because bill status not unpaid'),jta_error.invalid_input (shown in console and rolled back),OTHERS (logged into error table and rolled back),,,billed_items,,,
receive_payment,"p_bill_id customer_bills.bill_id%TYPE, p_type customer_bills.payment_type%TYPE, p_amount customer_bills.payment_amount%TYPE",NUMBER,customer_bills,cashier_drawer_assignments,,None,,"jta_error.throw(-20201, 'invalid payment type, valid types: cash, cheque, creditcard, linx')","jta_error.throw(-20201, 'attempt to pay on bill that has already received full payment')","jta_error.throw(-20201, 'invalid money amount, negative number')",jta_error.invalid_input (shown in console and rolled back),OTHERS (logged into error table and rolled back; returns NULL),,,,
get_tax_payment_due,"p_tax_code tax_rates.tax_code%TYPE, p_year DATE",NUMBER,billed_items,customer_bills,,None,,no_data_found (returns 0),OTHERS (logged into error table and returns NULL),,,,,,,
get_quantity_sold,"p_product_id products.product_id%TYPE, p_location_id locations.location_id%TYPE, p_date_start DATE, p_date_end DATE",NUMBER,products,locations,billed_items,None,,no_data_found (returns 0),jta_error.invalid_input (shown in console and returns NULL),OTHERS (logged into error table and returns NULL),,,customer_bills,cashier_drawer_assignments,cashier_stations,
stock_check,"p_product_id IN products.product_id%TYPE, p_location_id IN locations.location_id%TYPE, p_value_counted INTEGER, p_in_stock OUT NOCOPY INTEGER",None,inventory_by_location,missing_items,cost_sales_tracker (implicitly through update_inventory procedure),None,,no_data_found (shows error in console and sets p_in_stock to NULL),OTHERS (logged into error table and sets p_in_stock to NULL),,,,,,,
sunday_check,"p_staff_id IN staff.staff_id%TYPE, p_month IN DATE, p_sundays OUT NOCOPY INTEGER, p_available OUT NOCOPY BOOLEAN",None,work_hours,,,None,,no_data_found (sets p_sundays to 0 and p_available to TRUE),OTHERS (logged into error table and sets p_sundays and p_available to NULL),,,,,,,
payout,"p_staff_id IN staff.staff_id%TYPE, p_begin_date IN DATE, p_end_date IN DATE, p_gross_pay OUT NOCOPY payroll.gross_pay%TYPE, p_net_pay OUT NOCOPY payroll.net_pay%TYPE, p_hlt OUT NOCOPY payroll.hlt_surcharge_deduction%TYPE, p_nat OUT NOCOPY payroll.nat_insurance_deduction%TYPE, p_deductions OUT NOCOPY payroll.net_pay%TYPE",None,payroll,,,None,,"no_data_found (sets p_gross_pay, p_net_pay, and p_deductions to 0)","OTHERS (logged into error table and sets p_gross_pay, p_net_pay, and p_deductions to NULL)",,,,,,,
get_name,p_staff_id staff.staff_id%TYPE,VARCHAR2,staff,,,None,,OTHERS (returns 'Unknown'),,,,,,,,
